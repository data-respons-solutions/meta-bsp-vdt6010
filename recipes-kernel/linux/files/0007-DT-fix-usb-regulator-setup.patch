From 0623ee8b2fae068e91bf5cfb938cb5670e889456 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Mikko=20Salom=C3=A4ki?= <ms@datarespons.se>
Date: Tue, 14 May 2019 08:23:22 +0200
Subject: [PATCH] DT fix usb regulator setup

---
 arch/arm/boot/dts/datarespons-vdt6010-revA.dts | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

diff --git a/arch/arm/boot/dts/datarespons-vdt6010-revA.dts b/arch/arm/boot/dts/datarespons-vdt6010-revA.dts
index bc958c4ad094..cc386b4b59d6 100644
--- a/arch/arm/boot/dts/datarespons-vdt6010-revA.dts
+++ b/arch/arm/boot/dts/datarespons-vdt6010-revA.dts
@@ -57,22 +57,23 @@
 			enable-active-high;
 		};
 
-		reg_usb_p0_vbus: usb_p0_vbus {
+		reg_usb_ext_vbus: usb_ext_vbus {
 			compatible = "regulator-fixed";
-			regulator-name = "usb_p0_vbus";
+			regulator-name = "usb_ext_vbus";
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			gpio = <&gpio5 15 GPIO_ACTIVE_HIGH>;
 			enable-active-high;
 		};
 		
-		reg_usb_p1_vbus: usb_p1_vbus {
+		reg_usb_int_vbus: usb_int_vbus {
 			compatible = "regulator-fixed";
-			regulator-name = "usb_p1_vbus";
+			regulator-name = "usb_int_vbus";
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			gpio = <&gpio5 16 GPIO_ACTIVE_HIGH>;
 			enable-active-high;
+			regulator-always-on;
 		};
 		
 		reg_lcd_vdd: lcd_vdd {
@@ -455,7 +456,8 @@
 };
 
 &usbh1 {
-	status = "okay";
+	vbus-supply = <&reg_usb_ext_vbus>;
+	status = "okay";		
 };
 
 /* use for LAN8710 */

From da4d724678ae206239e731f8fc281a16a43a72f5 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Mikko=20Salom=C3=A4ki?= <ms@datarespons.se>
Date: Tue, 21 May 2019 10:59:46 +0200
Subject: [PATCH] DT - support ili2511

---
 arch/arm/boot/dts/datarespons-vdt6010-revA.dts | 23 +++++++++++++++++++----
 1 file changed, 19 insertions(+), 4 deletions(-)

diff --git a/arch/arm/boot/dts/datarespons-vdt6010-revA.dts b/arch/arm/boot/dts/datarespons-vdt6010-revA.dts
index 5025c8ddf83e..3fc04354105e 100644
--- a/arch/arm/boot/dts/datarespons-vdt6010-revA.dts
+++ b/arch/arm/boot/dts/datarespons-vdt6010-revA.dts
@@ -399,14 +399,29 @@
         compatible = "s35390a";
         reg = <0x30>;
     };
-
+/*
 	ili2511_touch: touch@41 {
 		compatible = "ilitek,ili251x";
 		reg = <0x41>;
 		interrupt-parent = <&gpio5>;
 		interrupts = <11 IRQ_TYPE_EDGE_FALLING>;
-		reset-gpios = <&gpio5 12 GPIO_ACTIVE_HIGH>;
+		reset-gpios = <&gpio5 12 GPIO_ACTIVE_LOW>;
 	};
+*/
+	ili2511_touch: touch@41 {
+		compatible = "tchip,ilitek";
+		reg = <0x41>;
+		interrupt-parent = <&gpio5>;
+		interrupts = <11 IRQ_TYPE_EDGE_FALLING>;
+		vdd-supply = <&gpio5>;
+		vcc_i2c-supply = <&gpio5>;
+		ilitek,irq-gpio = <&gpio5 11 IRQ_TYPE_EDGE_FALLING>;
+		ilitek,reset-gpio = <&gpio5 12 GPIO_ACTIVE_LOW>;
+		ilitek,vbus = "vcc_i2c";
+		ilitek,vdd = "vdd";
+		ilitek,name = "ilitek_i2c";
+	};
+
 };
 
 &pwm1 {
@@ -571,8 +586,8 @@
 				MX6QDL_PAD_GPIO_17__GPIO7_IO12		0x00002060 /* LED_EN */
 				
 				/* touch */
-				MX6QDL_PAD_DISP0_DAT17__GPIO5_IO11	0x0001b000 /* Touch_INT */
-				MX6QDL_PAD_DISP0_DAT18__GPIO5_IO12	0x00002060 /* Touch_Rest */
+				MX6QDL_PAD_DISP0_DAT17__GPIO5_IO11	0x000100b0 /* Touch_INT */
+				MX6QDL_PAD_DISP0_DAT18__GPIO5_IO12	0x0001b0b0 /* Touch_Rest */
 
 				/* leds */
 				MX6QDL_PAD_SD3_RST__GPIO7_IO08		0x00002060 /* GPIO_Debug_LED */

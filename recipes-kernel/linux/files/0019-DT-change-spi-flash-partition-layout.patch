From 4cfaab55f3a01c8b9ccac69b1ef0b6b81c8c9aa3 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Mikko=20Salom=C3=A4ki?= <ms@datarespons.se>
Date: Wed, 6 Nov 2019 12:15:29 +0100
Subject: [PATCH] DT: change spi flash partition layout

---
 .../arm/boot/dts/datarespons-vdt6010-revA.dts | 58 +++++++++++--------
 1 file changed, 33 insertions(+), 25 deletions(-)

diff --git a/arch/arm/boot/dts/datarespons-vdt6010-revA.dts b/arch/arm/boot/dts/datarespons-vdt6010-revA.dts
index a939b669fac7..16e5dab4adab 100644
--- a/arch/arm/boot/dts/datarespons-vdt6010-revA.dts
+++ b/arch/arm/boot/dts/datarespons-vdt6010-revA.dts
@@ -251,32 +251,40 @@
 		spi-max-frequency = <20000000>;
 		reg = <0>;
 		
-		spl@0x0 {
-			label = "spl";
-			reg = <0x0 0x30000>;
-		};
-		
-		u-boot@0x30000 {
-			label = "u-boot";
-			reg = <0x30000 0xF0000>;
-		};
-		
-		/*
-		* env integrated in u-boot
-		*
-		env@0xF0000 {
-			label = "env";
-			reg = <0xF0000 0x100000>;
-		};
-		*/
-		factory@0x100000 {
-			label = "factory";
-			reg = <0x100000 0x110000>;
-		};
+		partitions {
+			compatible = "fixed-partitions";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			
+			spl@0x0 {
+				label = "spl";
+				reg = <0x0 0x30000>;
+			};
+			
+			u-boot@0x30000 {
+				label = "u-boot";
+				reg = <0x30000 0xF0000>;
+			};
 		
-		user@0x110000 {
-			label = "user";
-			reg = <0x110000 0x400000>;
+			factory_a@0x120000 {
+				label = "factory_a";
+				reg = <0x120000 0x10000>;
+			};
+			
+			factory_b@0x130000 {
+				label = "factory_b";
+				reg = <0x130000 0x10000>;
+			};
+				
+			user_a@0x140000 {
+				label = "user_a";
+				reg = <0x140000 0x10000>;
+			};
+			
+			user_b@0x150000 {
+				label = "user_b";
+				reg = <0x150000 0x10000>;
+			};
 		};
 	};
 };
